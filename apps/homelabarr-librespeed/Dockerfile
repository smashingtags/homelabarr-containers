## This file is automatically generated (based on release.json)
##
## Do not changes any lines here
##
####################################
# Docker owned by homelabarr       #
# Docker Maintainer smashingtags   #
####################################
# shellcheck disable=SC2086
# shellcheck disable=SC2046
FROM ghcr.io/linuxserver/baseimage-alpine-nginx:3.15
LABEL org.opencontainers.image.source="https://github.com/smashingtags/homelabarr-containers"

ARG TARGETPLATFORM
ARG BUILDPLATFORM

ARG VERSION="5.4.1"
ARG BRANCH="master"

RUN \
  echo "**** install packages ****" && \
    apk add -U --update --no-cache aria2 jq tar curl php7-ctype php7-gd php7-mysqli php7-pdo_pgsql php7-pdo_sqlite && \
  echo "**** install 'homelabarr-librespeed' ****" && \
    mkdir -p /usr/share/webapps/librespeed && \
    curl -fsSL "https://github.com/librespeed/speedtest/archive/refs/tags/${VERSION}.tar.gz" | tar xzf - -C /usr/share/webapps/librespeed --strip-components=1 && \
  echo "**** cleanup ****" && \
    rm -rf /root/.cache /tmp/*

COPY ./apps/homelabarr-librespeed/root/ /

EXPOSE 80
VOLUME /config
##EOF
