## This file is automatically generated (based on release.json)
##
## Do not changes any lines here
##
####################################
# Docker owned by homelabarr       #
# Docker Maintainer smashingtags   #
####################################
# shellcheck disable=SC2086
# shellcheck disable=SC2046
FROM ghcr.io/linuxserver/baseimage-ubuntu:bionic
LABEL org.opencontainers.image.source="https://github.com/smashingtags/homelabarr-containers"

ARG TARGETPLATFORM
ARG BUILDPLATFORM
ARG VERSION="0.24.234"
ARG BRANCH="master"

ARG DEBIAN_FRONTEND="noninteractive"
ENV XDG_DATA_HOME="/config" \
XDG_CONFIG_HOME="/config"

RUN \
   echo "**** update runtime packages ****" && \
     apt-get update -yqq && \
   echo "**** install packages ****" && \
     apt-get install -yqq uuid-runtime udev jq wget curl tar unzip unrar gpg-agent software-properties-common libicu60 && \
   echo "**** install jackett ****" && \
     mkdir -p /app/Jackett && \
     curl -fsSL "https://github.com/Jackett/Jackett/releases/download/v${VERSION}/Jackett.Binaries.LinuxAMDx64.tar.gz" | tar xzf - -C /app/Jackett --strip-components=1 && \
   echo "**** fix for host id mapping error ****" && \
     chown -R root:root /app/Jackett && \
   echo "v0.24.234" > /etc/docker-image && \
   echo "**** cleanup ****" && \
     apt-get remove -yqq software-properties-common gpg-agent && \
     apt-get autoremove -yqq && apt-get clean -yqq && \
     rm -rf /tmp/* /var/lib/apt/lists/* /var/tmp/* /var/log/*

COPY --chown=abc ./apps/homelabarr-jackett/root/ /

EXPOSE 9117

VOLUME /config
##EOF
