## This file is automatically generated (based on release.json)
##
## Do not changes any lines here
##
####################################
# All rights reserved.              #
# started from Zero                 #
# Docker owned dockserver           #
# Docker Maintainer dockserver      #
#####################################
#####################################
# THIS DOCKER IS UNDER LICENSE      #
# NO CUSTOMIZING IS ALLOWED         #
# NO REBRANDING IS ALLOWED          #
# NO CODE MIRRORING IS ALLOWED      #
#####################################
# shellcheck disable=SC2086
# shellcheck disable=SC2046
FROM python:3.10-slim

LABEL org.opencontainers.image.source="https://github.com/dockserver/container"

ARG TARGETPLATFORM
ARG BUILDPLATFORM

ENV LANG=C.UTF-8 \
    TZ=UTC \
    PUID=1000 \
    PGID=1000 \
    DEBIAN_FRONTEND=noninteractive \
    PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

CMD [ "bash" ]
COPY ./apps/homelabarr-rollarr/root/ /

# Skip the massive install.sh since python:3.10-slim already has Python
# Just install the required packages and pip dependencies
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
        git \
        curl \
        ca-certificates \
        cron && \
    rm -rf /var/lib/apt/lists/* && \
    chmod -R 755 /rollarr/* && \
    pip install --no-cache-dir -r /rollarr/requirements.txt || true

RUN crontab /crontab

EXPOSE 3100
VOLUME /config
CMD [ "/bin/bash", "/run.sh" ]
##EOF
